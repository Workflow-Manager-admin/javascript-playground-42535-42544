{"is_source_file": true, "format": "JavaScript", "description": "This file defines a DatabaseService class responsible for managing database connections, executing queries, handling transactions, and setting up tables for a project that includes user management, code snippets, and execution history. It encapsulates database interaction logic for a Node.js application using the mysql2 promise-based library.", "external_files": ["mysql2/promise"], "external_methods": ["mysql.createPool", "mysql.createPool()"], "published": ["new DatabaseService()"], "classes": [{"name": "DatabaseService", "description": "A class providing methods to initialize the database connection pool, execute queries, manage transactions, create necessary tables, and close the connection pool."}], "methods": [{"name": "constructor()", "description": "Initializes the DatabaseService instance and sets up the connection pool.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "initializePool()", "description": "Creates a connection pool using environment variables or default values.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "query(sql, params = [])", "description": "Executes a SQL query with optional parameters and returns the results.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "transaction(callback)", "description": "Executes a callback within a database transaction, handling commit and rollback.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "initializeTables()", "description": "Creates the required database tables if they do not exist, including users, code_snippets, and execution_history.", "scope": "DatabaseService", "scopeKind": "class"}, {"name": "close()", "description": "Closes the database connection pool.", "scope": "DatabaseService", "scopeKind": "class"}], "calls": ["mysql.createPool", "this.pool.execute", "this.pool.getConnection", "connection.beginTransaction", "connection.commit", "connection.rollback", "connection.release", "this.query"], "search-terms": ["DatabaseService", "mysql2/promise", "initializePool", "execute SQL queries", "transaction handling", "createTables", "connection pool", "initializeTables", "Node.js database"], "state": 2, "file_id": 13, "knowledge_revision": 55, "git_revision": "", "revision_history": [{"27": ""}, {"55": ""}], "ctags": [{"_type": "tag", "name": "DatabaseService", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^class DatabaseService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "close", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^  async close() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^    const config = {$/", "language": "JavaScript", "kind": "class", "scope": "DatabaseService.initializePool", "scopeKind": "class"}, {"_type": "tag", "name": "connectionLimit", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^      connectionLimit: 10,$/", "language": "JavaScript", "kind": "property", "scope": "DatabaseService.initializePool.config", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "database", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^      database: process.env.DB_NAME || 'javascript_playground',$/", "language": "JavaScript", "kind": "property", "scope": "DatabaseService.initializePool.config", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^module.exports = new DatabaseService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "host", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^      host: process.env.DB_HOST || 'localhost',$/", "language": "JavaScript", "kind": "property", "scope": "DatabaseService.initializePool.config", "scopeKind": "class"}, {"_type": "tag", "name": "initializePool", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^  initializePool() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "initializeTables", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^  async initializeTables() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "mysql", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^const mysql = require('mysql2\\/promise');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^      password: process.env.DB_PASSWORD || '',$/", "language": "JavaScript", "kind": "property", "scope": "DatabaseService.initializePool.config", "scopeKind": "class"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^      port: process.env.DB_PORT || 3306,$/", "language": "JavaScript", "kind": "property", "scope": "DatabaseService.initializePool.config", "scopeKind": "class"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^  async query(sql, params = []) {$/", "language": "JavaScript", "kind": "method", "signature": "(sql, params = [])", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "queueLimit", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^      queueLimit: 0$/", "language": "JavaScript", "kind": "property", "scope": "DatabaseService.initializePool.config", "scopeKind": "class"}, {"_type": "tag", "name": "transaction", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^  async transaction(callback) {$/", "language": "JavaScript", "kind": "method", "signature": "(callback)", "scope": "DatabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^      user: process.env.DB_USER || 'root',$/", "language": "JavaScript", "kind": "property", "scope": "DatabaseService.initializePool.config", "scopeKind": "class"}, {"_type": "tag", "name": "waitForConnections", "path": "/home/kavia/workspace/code-generation/javascript-playground-42535-42544/javascript_playground_backend/src/services/database.js", "pattern": "/^      waitForConnections: true,$/", "language": "JavaScript", "kind": "property", "scope": "DatabaseService.initializePool.config", "scopeKind": "class"}], "hash": "37fcfabec314c08a3dcc4e2ce8928a90", "format-version": 4, "code-base-name": "javascript_playground_backend", "filename": "javascript_playground_backend/src/services/database.js", "fields": [{"name": "connectionLimit: 10,", "scope": "DatabaseService.initializePool.config", "scopeKind": "class", "description": "unavailable"}, {"name": "database: process.env.DB_NAME || 'javascript_playground',", "scope": "DatabaseService.initializePool.config", "scopeKind": "class", "description": "unavailable"}, {"name": "module.exports = new DatabaseService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "host: process.env.DB_HOST || 'localhost',", "scope": "DatabaseService.initializePool.config", "scopeKind": "class", "description": "unavailable"}, {"name": "password: process.env.DB_PASSWORD || '',", "scope": "DatabaseService.initializePool.config", "scopeKind": "class", "description": "unavailable"}, {"name": "port: process.env.DB_PORT || 3306,", "scope": "DatabaseService.initializePool.config", "scopeKind": "class", "description": "unavailable"}, {"name": "queueLimit: 0", "scope": "DatabaseService.initializePool.config", "scopeKind": "class", "description": "unavailable"}, {"name": "user: process.env.DB_USER || 'root',", "scope": "DatabaseService.initializePool.config", "scopeKind": "class", "description": "unavailable"}, {"name": "waitForConnections: true,", "scope": "DatabaseService.initializePool.config", "scopeKind": "class", "description": "unavailable"}]}